---
title: MySQL中的正则表达式
date: 2023-02-14 15:22:02 +0800
categories: [数据分析,SQL学习]
tags: [SQL,正则表达式]
math: true
mermaid: true
---

今天在做Leetcode的SQL题目[**1517.查找拥有有效邮箱的用户**](https://leetcode.cn/problems/find-users-with-valid-e-mails/description/?envType=study-plan-v2&envId=sql-free-50)时，发现使用简单的like模糊匹配是不可能完成这样的字符串匹配任务的，由于SQL语言并不是一个编程语言，因此也不能使用循环等方式处理字符串，因此感觉无法解决这样的字符串匹配问题。

因此无奈去看了题解，发现MySQL支持正则表达式，题解简洁明了。但我在正则表达式方面还有些欠缺，因此特此学习了一下语法，并记录下来以供参考。

## 正则表达式简介和语法

正则表达式是由一系列字符和特殊字符组成的模式，用于描述要匹配的文本模式。
正则表达式可以在文本中查找、替换、提取和验证特定的模式。

主要有以下几种字符模式

1. ^ 字符
    + 匹配输入字符串的开始位置。

2. $ 字符
    + 匹配输入字符串的结束位置。

3. . 字符
    + 匹配除 "\n" 之外的任何单个字符。要匹配包括 '\n' 在内的任何字符，请使用像 '[.\n]' 的模式。

4. [...]
    + 字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 "plain" 中的 'a'。

5. [^...]
    + 负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 "plain" 中的'p'。

6. p1\|p2\|p3
    + 匹配 p1 或 p2 或 p3。例如，'z\|food' 能匹配 "z" 或 "food"。'(z\|f)ood' 则匹配 "zood" 或 "food"。

7. {n}
    + n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。

8. {n,m}
    + m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。

9. \* 字符
    + 匹配前面的子表达式零次或多次。例如，'zo*' 能匹配 "z" 以及 "zoo"。* 等价于{0,}。

10. \+ 字符
    + 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}。

11. ? 字符
    + 匹配零个或一个前面的元素。例如，'zo?' 能匹配 'zo'和'z'，但是不能匹配 'zoo'。 ? 等价于{0,1}

12. [a-z]
    + 匹配范围内的任意一个小写字母，范围可以自定义，例如[3-6]

13. \ + 特殊字符
    + 若要匹配正则表达式中的某些特殊字符，例如?、*、+，需要在前面加反斜杠\，这样这个字符就失去了正则表达式匹配作用，只作为字符使用。例如'12\+34'，可以匹配'12+34'

## 使用SQL语法进行正则表达式匹配

基本的语法需要在匹配的字符后使用`REGEXP`或`RLIKE`。

```sql
-- REGEXP
SELECT column1, column2, ...
FROM table_name
WHERE column_name REGEXP 'pattern';

-- RLIKE
SELECT column1, column2, ...
FROM table_name
WHERE column_name RLIKE 'pattern';
```

在`REGEXP`或`RLIKE`加入`BINARY`关键词，匹配可以区分大小写

## 正则表达式学习网站推荐

https://regexlearn.com/zh-cn/learn   

此网站在可视化和教学方面做的非常出色，十分推荐初学者学习。